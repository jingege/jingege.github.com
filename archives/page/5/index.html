<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="alternate" type="application/rss+xml" title="晋哥哥的私房钱" href="/atom.xml"><link rel="stylesheet" href="/styles.css?v=0.4.5"><link rel="stylesheet" href="/css/main.css?v=0.4.5"><title>晋哥哥的私房钱</title></head><body><div class="container"><div class="columns page-header"><h1>晋哥哥的私房钱</h1></div><div class="columns"><div class="navigation clearfix"><nav class="left"><a href="/" class="favicon"><img alt="晋哥哥的私房钱" src="/favicon.ico"></a><a href="/">首页</a><a href="/about">关于我</a><a href="/booklist">书单</a><a href="/cheatsheet">小抄</a></nav><nav class="right"><a href="/atom.xml">RSS</a><a target="_blank" href="http://github.com/jingege">fork on Github</a></nav></div></div><div class="columns"><div class="block-body column three-fourths"><div class="archive-title">小站重新装修，欢迎到访。</div><article><header><h2><a href="/2013/09/05/yaserde-opensource/">[开源]yaderde框架</a></h2></header><div class="article-meta clearfix"><time class="left">2013 9 月 5 日</time><ul class="tags left"><li><a href="/categories/technology/">技术</a></li></ul><ul class="tags right"><li><a href="/tags/java/">Java</a></li><li><a href="/tags/yaserde/">Yaserde</a></li><li><a href="/tags/opensource/">开源</a></li></ul></div><div class="markdown-body"><p>项目地址：<a href="https://github.com/jingege/yaserde" target="_blank" rel="external">https://github.com/jingege/yaserde</a></p>
<p>其实当我决定写这个框架的时候，我突然意识到，我想要的正如hadoop的<code>Writable</code>做的，而且hadoop已经做得相当好了。可我还是决定要按自己的思路造一个轮子出来。一来自娱自乐，二来也算是对过去几年遗憾的稍许弥补。目前只做了个雏形，但对于简单场景还是可用的。</p>
</div></article><article><header><h2><a href="/2013/09/03/an-iterator-exception/">记一个Iterator的异常</a></h2></header><div class="article-meta clearfix"><time class="left">2013 9 月 3 日</time><ul class="tags left"><li><a href="/categories/technology/">技术</a></li></ul><ul class="tags right"><li><a href="/tags/java/">Java</a></li></ul></div><div class="markdown-body"><p>今天在一个熟悉的场景首次遇到了异常，在使用ArrayList的Iterator时，抛出了<code>java.lang.IllegalStateException</code>。仔细分析后，发现是一个不合适的循环嵌套，导致了<code>it.remove()</code>连续调用了两次。结合源码看了下，<code>AbstractList$Itr</code>类使用了一个<code>int lastRet</code>变量标记最近一次<code>next()</code>所指向的元素，而在调用<code>it.remove()</code>时，先检查lastRet的值，如果为-1，则抛出<code>IllegalStateException</code>，否则将lastRet置为-1。用以保证一个元素只被remove一次。在Itr类的子类ListIterator里，<code>previous()</code>也是同样原理。</p>
<p>古人云：</p>
<blockquote>
<p>吃一堑长一智</p>
</blockquote>
<p>又云：</p>
<blockquote>
<p>学如逆水行舟，不进则退</p>
</blockquote>
<p>重点在吃和行两个字，讲究行动，一定要在实践中遇到困难，并解决，方能长一智，方能前进。对于码农，则一定是要多动手，多碰钉子，多独立解决问题，如是自勉。</p>
</div></article><article><header><h2><a href="/2013/08/28/user-dir-env-misunderstand/">对user.dir的误解</a></h2></header><div class="article-meta clearfix"><time class="left">2013 8 月 28 日</time><ul class="tags left"><li><a href="/categories/technology/">技术</a></li></ul><ul class="tags right"><li><a href="/tags/java/">Java</a></li></ul></div><div class="markdown-body"><p>今天调试程序的时候，发现我之前hard code的一段路径修改成了<code>System.getProperty(&quot;user.dir&quot;)</code>之后，依然可以正常运行。我一直以来都以为user.dir就是当前用户的home dir，似乎这个印象应该自大学时代就已经有了，所以我有些先入为主地认为是环境有问题。</p>
<p>我的程序是最终由一个py脚本调用jar包来执行，为了搞明白这个困惑的问题，我在java代码里插入了多处<code>out.println(System.getProperty(&quot;user.dir&quot;))</code>，然后执行py，结果输出并非home dir。于是凭直觉将问题定位在py里的一句<code>os.chdir(sys.path[0]+&quot;/..&quot;)</code>上。再然后我就写了个测试的Main函数，在控制台直接<code>java -cp a.jar path.to.Main</code>，果然输出了当前目录，于是问题清晰了。</p>
<p>于是网上查了下，竟然是我搞混了。如下摘自<a href="http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html" target="_blank" rel="external">jdk文档</a>：</p>
<blockquote>
<p>“user.dir”  User working directory</p>
<p>“user.home”  User home directory</p>
</blockquote>
<p>最后我也终于记起来为什么会有这个错误的印象了。大学时用java写了个简单的http server，创建配置文件时，我默认写在了user.home，所以有了这个印象。如今看到user.dir，便和user.home混淆起来。</p>
<p>都写这么多年java了，让大家见笑了。问题也搞清楚了，我发现以后遇到路径问题，借助<code>user.dir</code>和脚本，可以非常方便的解决了。</p>
</div></article><div class="archive-pagination"><div class="paginator"><a class="extend prev" rel="prev" href="/archives/page/4/">&laquo;</a><a class="page-number" href="/archives/">1</a><span class="space">&hellip;</span><a class="page-number" href="/archives/page/3/">3</a><a class="page-number" href="/archives/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/archives/page/6/">6</a><a class="page-number" href="/archives/page/7/">7</a><a class="extend next" rel="next" href="/archives/page/6/">&raquo;</a></div></div></div><div class="block-sidebar column one-fourth"><div class="widget text-content"><p>博主是一个不是很聪明的码农。完美主义者，强迫症中期。这里会记录一些回忆和点滴，以博为镜。</p>
<p>武器库：</p>
<ul>
<li><a href="http://www.apple.com/cn/macbook-pro/">MacBook Pro</a></li>
<li><a href="https://www.jetbrains.com/idea/">Intellij IDEA</a></li>
<li><a href="https://www.iterm2.com/">iTerm2</a></li>
<li><a href="http://honx.in/_U9DPy38mTieZk3On">红杏</a></li>
<li><a href="https://www.oracle.com/java/">Java</a>/<a href="http://scala-lang.org/">Scala</a></li>
</ul>
</div><div class="widget tags"><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ant/">Ant</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/btrace/">Btrace</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/clojure/">Clojure</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/datax/">DataX</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/emacs/">Emacs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hash/">Hash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">Hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hive/">Hive</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jumper/">Jumper</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/leiningen/">Leiningen</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mq/">MQ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oozie/">Oozie</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/yaserde/">Yaserde</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/memorandum/">备忘</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/opensource/">开源</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/life/">生活</a></li></ul></div><div class="widget archives"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">十二月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">八月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">七月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/01/">一月 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/10/">十月 2013</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/09/">九月 2013</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/08/">八月 2013</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/05/">五月 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/03/">三月 2013</a><span class="archive-list-count">1</span></li></ul></div><div class="widget text-content"><p>该博客使用基于 &nbsp;<a href="http://hexo.io">Hexo</a>&nbsp; 的 &nbsp;<a href="https://github.com/jysperm/hexo-theme-simpleblock">simpleblock</a>&nbsp; 主题。博客内容使用 &nbsp;<a href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn">CC BY-NC-SA 3.0</a>&nbsp; 授权发布。最后生成于 2016-02-18.</p></div></div></div></div><script>window.duoshuoQuery = {short_name: 'jingege'}</script><script src="https://static.duoshuo.com/embed.js"></script></body></html>